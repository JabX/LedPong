C51 COMPILER V9.50a   LEDPONG                                                              11/25/2014 15:53:22 PAGE 1   


C51 COMPILER V9.50a, COMPILATION OF MODULE LEDPONG
OBJECT MODULE PLACED IN LedPong.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\c51.exe LedPong.c DB OE BR INCDIR(C:\Program Files (x86)\SiLabs\MCU\Inc)

line level    source

   1          #include <c8051f310.h>
   2          
   3          void SYSCLK_Init();
   4          void sendData(unsigned char a, unsigned char d, int isLine);
   5          
   6          sbit CLK       = P0^0;
   7          sbit DATA          = P1^0;
   8          sbit LOAD          = P1^1;
   9          
  10          unsigned char init;
  11          
  12          void main()
  13          {
  14   1              PCA0MD &= ~0x40;
  15   1      
  16   1              XBR1     = 0x40;
  17   1              P0MDOUT |= 0x01;
  18   1              P1MDOUT |= 0x03;
  19   1              SYSCLK_Init();
  20   1              DATA = 0;
  21   1              LOAD = 0;
  22   1              CLK = 0;
  23   1      
  24   1              sendData(0x0C, 0x00, 0); // shutdown
  25   1              sendData(0x0C, 0x01, 0); // Normal operation mode
  26   1              sendData(0x0A, 0x0F, 0); // Intensity
  27   1              sendData(0x0B, 0x07, 0); // No scan limit
  28   1              sendData(0x09, 0x00, 0); // No decode
  29   1              for (init = 0x01;init<=0x08;init++)
  30   1                      sendData(init, 0x00, 1);
  31   1              sendData(0x01, 0x20, 1);
  32   1              sendData(0x07, 0xFE, 1);
  33   1              sendData(0x06, 0xF0, 1);
  34   1              sendData(0x04, 0xB0, 1);
  35   1              sendData(0x02, 0xCE, 1);
  36   1              while (1) {}
  37   1      }
  38          
  39          void SYSCLK_Init()
  40          {
  41   1         OSCICN = 0xc3;                         // configure internal oscillator for its lowest frequency
  42   1         RSTSRC = 0x04;                         // enable missing clock detector
  43   1      }
  44          
  45          void sendData(unsigned char a, unsigned char d, int isLine)
  46          {
  47   1              //EA = 0;
  48   1              unsigned char b;
  49   1              unsigned char p;
  50   1      
  51   1              LOAD = 0;
  52   1              CLK = 0;
  53   1              for(b=0x80; b>0; b=b>>1)
  54   1              {
  55   2                      DATA = (a&b)?1:0;
C51 COMPILER V9.50a   LEDPONG                                                              11/25/2014 15:53:22 PAGE 2   

  56   2                      CLK = 1;
  57   2                      CLK = 0;
  58   2              }
  59   1      
  60   1              if(isLine)
  61   1              {
  62   2                      p = (d&0x01);
  63   2                      d >>= 1;
  64   2                      d &= 0x7F;
  65   2                      if(p) d |= 0x80;
  66   2              }
  67   1      
  68   1              for(b=0x80; b>0; b=b>>1)
  69   1              {
  70   2                      DATA = (d&b)?1:0;
  71   2                      CLK = 1;
  72   2                      CLK = 0;
  73   2              }
  74   1              LOAD = 1;
  75   1              //EA = 1;
  76   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    236    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
